<h3 id="time-zone-cronjobs">Time Zone Cronjobs</h3><h4 id="overview">Overview</h4><p>There may be a requirement for some Cronjobs to run at specific times of a day in the UK (including during BST), but Kubernetes Cronjob does not support time zone, our cluster uses UTC timezone internally. To enable service teams to run cronjobs at specific times, we deployed <a href="https://github.com/hiddeco/cronjobber">TZ Cronjobber</a>(cronjob controller for Kubernetes with support for time zones).</p>
<h4 id="usage">Usage</h4><p>Instead of creating a CronJob like you normally would, you create a TZCronJob, which works exactly the same but supports an additional field: <code>.spec.timezone</code>. Set this to the <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">time zone</a> you wish to schedule your jobs in and Cronjobber will take care of the rest.</p>
<p>In the below example timezone is set to &ldquo;Europe/London&rdquo; and scheduled every day at 14:10. During BST the job will trigger at 13:10 UTC, but the rest of the year it will trigger at 14:10 UTC.</p>
<p>example:</p>
<div class="highlight"><pre class="highlight plaintext"><code>apiVersion: cronjobber.hidde.co/v1alpha1
kind: TZCronJob
metadata:
  name: hello
spec:
  schedule: "10 14 * * *"
  timezone: "Europe/London"
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: hello
            image: bitnami/nginx:latest
            args:
            - /bin/sh
            - -c
            - date; echo "Hello, World!"
          restartPolicy: OnFailure
</code></pre></div><h4 id="applying-tzcronjob-in-your-namespace">Applying tzcronjob in your Namespace</h4><p>Using the above example create an tzcronjob.yaml and apply the TZCronjob to your namespace in the kubernetes cluster.</p>
<div class="highlight"><pre class="highlight plaintext"><code>  ```
  kubectl apply --filename tzcronjob.yaml --namespace [your namespace]
  ```
</code></pre></div><p>Verify the tzcronjob is created, and job is triggered on a given schedule as per the timezone used.</p>
<div class="highlight"><pre class="highlight plaintext"><code>  ```
  kubectl get tzcronjob --namespace [your namespace]
  ```
</code></pre></div>