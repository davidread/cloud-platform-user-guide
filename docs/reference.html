<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
      <meta name="robots" content="noindex">

    <title>Reference | Cloud Platform User Guide</title>

    <!--[if gt IE 8]><!--><link href="/stylesheets/screen.css" rel="stylesheet" media="screen" /><!--<![endif]-->
    <!--[if lte IE 8]><link href="/stylesheets/screen-old-ie.css" rel="stylesheet" media="screen" /><![endif]-->

    <link rel="canonical" href="https://user-guide.cloud-platform.service.justice.gov.uk/reference.html">


    <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
    <script src="/javascripts/application.js"></script>

      <meta property="og:image" content="https://user-guide.cloud-platform.service.justice.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="Cloud Platform User Guide" />
      <meta property="og:title" content="Reference" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://user-guide.cloud-platform.service.justice.gov.uk/reference.html" />
      <meta property="twitter:card" content="summary" />
      <meta property="twitter:domain" content="user-guide.cloud-platform.service.justice.gov.uk" />
      <meta property="twitter:image" content="https://user-guide.cloud-platform.service.justice.gov.uk/images/govuk-large.png" />
      <meta property="twitter:title" content="Reference | Cloud Platform User Guide" />
      <meta property="twitter:url" content="https://user-guide.cloud-platform.service.justice.gov.uk/reference.html" />

    
  </head>

  <body>
    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="skip-link">Skip to main content</a>

        <header class="header header--full-width">
  <div class="header__container">
    <div class="header__brand">
        <a href="/">
        <span class="header__title">
          Cloud Platform User Guide
            <span class="phase-banner">INTERNAL</span>
        </span>
        </a>
    </div>

      <div data-module="navigation">
        <button type="button" class="header__navigation-toggle js-nav-toggle" aria-controls="navigation" aria-label="Show or hide top level navigation">Menu</button>

        <nav id="navigation" class="header__navigation js-nav" aria-label="Top Level Navigation" aria-hidden="true">
          <ul>
              <li>
                <a href="mailto:platforms+user-guide@digital.justice.gov.uk?subject=User+guide+feedback">Feedback / Report a problem</a>
              </li>
              <li>
                <a href="/">Documentation</a>
              </li>
              <li>
                <a href="https://github.com/ministryofjustice/cloud-platform-user-guide">GitHub</a>
              </li>
          </ul>
        </nav>
      </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </a>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents">
              <div class="search" data-module="search">
  <form action="https://www.google.co.uk/search" method="get" role="search">
    <input type="hidden" name="as_sitesearch" value="https://user-guide.cloud-platform.service.justice.gov.uk"/>
    <label for="search"  class="search__label">Search (via Google)</label>
    <input type="text" id="search" name="q" placeholder="Search" aria-controls="search-results" class="form-control" />
  </form>
  <div id="search-results" class="search-results" aria-hidden="true" role="dialog" aria-labelledby="search-results-title">
    <div class="search-results__inner">
      <button class="search-results__close">Close<span class="search-results__close-label"> search results</span></button>
      <h2 id="search-results-title" class="search-results__title" aria-live="polite">Results</h2>
      <div class="search-results__content"></div>
    </div>
  </div>
</div>

              <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading" data-module="collapsible-navigation">
                      <ul>
  <li>
    <a href="/#cloud-platform-user-guide">Cloud platform user guide</a>
    <ul>
      <li>
        <ul>
          <li>
          </li>
          <li>
            <a href="/#who-is-the-platform-for">Who is the platform for</a>
          </li>
          <li>
            <a href="/#what-do-we-currently-support">What do we currently support</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <a href="/concepts.html#concepts">Concepts</a>
    <ul>
      <li>
        <a href="/concepts.html#kubernetes">Kubernetes</a>
        <ul>
          <li>
            <a href="/concepts.html#resources">Resources</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <a href="/tasks.html#tasks">Tasks</a>
    <ul>
      <li>
        <a href="/tasks.html#how-to-use-kubectl-to-connect-to-the-cluster">How to use kubectl to connect to the cluster</a>
        <ul>
          <li>
            <a href="/tasks.html#installation">Installation</a>
          </li>
          <li>
            <a href="/tasks.html#authentication">Authentication</a>
          </li>
          <li>
            <a href="/tasks.html#where-to-go-from-here">Where to go from here?</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#creating-a-cloud-platform-environment">Creating a Cloud Platform Environment</a>
        <ul>
          <li>
            <a href="/tasks.html#introduction">Introduction</a>
          </li>
          <li>
            <a href="/tasks.html#objective">Objective</a>
          </li>
          <li>
            <a href="/tasks.html#create-an-environment">Create an environment</a>
          </li>
          <li>
            <a href="/tasks.html#accessing-your-environments">Accessing your environments</a>
          </li>
          <li>
            <a href="/tasks.html#next-steps">Next steps</a>
          </li>
          <li>
            <a href="/tasks.html#more-information-on-environment-definition">More information on environment definition</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#creating-an-ecr-repository">Creating an ECR repository</a>
        <ul>
          <li>
            <a href="/tasks.html#creating-an-ecr-repository-introduction">Introduction</a>
          </li>
          <li>
            <a href="/tasks.html#accessing-the-credentials">Accessing the credentials</a>
          </li>
          <li>
            <a href="/tasks.html#managing-ecr-repository">Managing ECR Repository</a>
          </li>
          <li>
            <a href="/tasks.html#creating-an-ecr-repository-next-steps">Next steps</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#creating-a-route-53-hosted-zone">Creating a Route 53 Hosted Zone</a>
        <ul>
          <li>
            <a href="/tasks.html#overview">Overview</a>
          </li>
          <li>
            <a href="/tasks.html#pre-requisites">Pre-Requisites</a>
          </li>
          <li>
            <a href="/tasks.html#terraform-files">Terraform files</a>
          </li>
          <li>
            <a href="/tasks.html#creating-the-resource">Creating the resource</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#adding-aws-resources-to-your-environment">Adding AWS resources to your environment</a>
        <ul>
          <li>
            <a href="/tasks.html#available-modules">Available modules</a>
          </li>
          <li>
            <a href="/tasks.html#usage">Usage</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#deploying-a-39-hello-world-39-application-to-the-cloud-platform">Deploying a ‘Hello World’ application to the Cloud Platform</a>
        <ul>
          <li>
            <a href="/tasks.html#deploying-a-39-hello-world-39-application-to-the-cloud-platform-overview">Overview</a>
          </li>
          <li>
            <a href="/tasks.html#prerequisites">Prerequisites</a>
          </li>
          <li>
            <a href="/tasks.html#step-1-build-your-docker-image">Step 1 - Build your docker image</a>
          </li>
          <li>
            <a href="/tasks.html#step-2-push-the-image-to-your-ecr">Step 2 - Push the image to your ECR</a>
          </li>
          <li>
            <a href="/tasks.html#step-3-configure-your-namespace-in-the-kubernetes-cluster">Step 3 - Configure your namespace in the Kubernetes Cluster</a>
          </li>
          <li>
            <a href="/tasks.html#step-4-deploy-the-application">Step 4 - Deploy the application</a>
          </li>
          <li>
            <a href="/tasks.html#interacting-with-the-application">Interacting with the application</a>
          </li>
          <li>
            <a href="/tasks.html#add-http-basic-authentication">Add HTTP Basic Authentication</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#deploying-a-multi-container-application-to-the-cloud-platform">Deploying a multi-container application to the Cloud Platform</a>
        <ul>
          <li>
            <a href="/tasks.html#deploying-a-multi-container-application-to-the-cloud-platform-overview">Overview</a>
          </li>
          <li>
            <a href="/tasks.html#running-in-the-kubernetes-cluster">Running in the Kubernetes Cluster</a>
          </li>
          <li>
            <a href="/tasks.html#create-an-rds-instance">Create an RDS instance</a>
          </li>
          <li>
            <a href="/tasks.html#build-docker-images-and-pushing-to-ecr">Build docker images and pushing to ECR</a>
          </li>
          <li>
            <a href="/tasks.html#kubernetes-configuration">Kubernetes configuration</a>
          </li>
          <li>
            <a href="/tasks.html#deploying-to-the-cluster">Deploying to the cluster</a>
          </li>
          <li>
            <a href="/tasks.html#deploying-a-multi-container-application-to-the-cloud-platform-interacting-with-the-application">Interacting with the application</a>
          </li>
          <li>
            <a href="/tasks.html#further-development">Further Development</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#deploying-with-helm-and-circleci">Deploying with Helm and CircleCI</a>
        <ul>
          <li>
            <a href="/tasks.html#prerequisite-for-live-1-deployment">Prerequisite for Live-1 deployment</a>
          </li>
          <li>
            <a href="/tasks.html#deploying-an-application-to-the-cloud-platform-with-helm">Deploying an application to the Cloud Platform with Helm</a>
          </li>
          <li>
            <a href="/tasks.html#continuous-deployment-of-an-application-using-circleci-and-helm">Continuous Deployment of an application using CircleCI and Helm</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#how-do-i-run-rails-database-migrations">How do I run Rails database migrations?</a>
        <ul>
          <li>
            <a href="/tasks.html#do-not-run-migrations-on-container-startup">Do not run migrations on container startup</a>
          </li>
          <li>
            <a href="/tasks.html#further-reading">Further reading</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#adding-a-secret-to-an-application">Adding a secret to an application</a>
        <ul>
          <li>
            <a href="/tasks.html#adding-a-secret-to-an-application-overview">Overview</a>
          </li>
          <li>
            <a href="/tasks.html#adding-a-secret-to-an-application-prerequisites">Prerequisites</a>
          </li>
          <li>
            <a href="/tasks.html#configuring-secrets">Configuring secrets</a>
          </li>
          <li>
            <a href="/tasks.html#creating-the-secret">Creating the secret</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#creating-pingdom-checks">Creating Pingdom checks</a>
        <ul>
          <li>
            <a href="/tasks.html#creating-pingdom-checks-overview">Overview</a>
          </li>
          <li>
            <a href="/tasks.html#creating-pingdom-checks-prerequisites">Prerequisites</a>
          </li>
          <li>
            <a href="/tasks.html#create-a-pingdom-check">Create a Pingdom check</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#cleaning-up">Cleaning up</a>
        <ul>
          <li>
            <a href="/tasks.html#2-tell-terraform-to-delete-your-aws-resources">2. Tell terraform to delete your AWS resources</a>
          </li>
          <li>
            <a href="/tasks.html#3-remove-your-namespace-code-from-the-cloud-platform-environments-repository">3. Remove your namespace code from the cloud-platform-environments repository</a>
          </li>
          <li>
            <a href="/tasks.html#4-delete-all-of-the-kubernetes-resources-inside-your-namespace">4. Delete all of the kubernetes resources inside your namespace.</a>
          </li>
          <li>
            <a href="/tasks.html#5-delete-your-namespace-from-the-cluster">5. Delete your namespace from the cluster.</a>
          </li>
          <li>
            <a href="/tasks.html#summary">Summary</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#monitoring-applications">Monitoring Applications</a>
        <ul>
          <li>
            <a href="/tasks.html#using-the-cloud-platform-prometheus-alertmanager-and-grafana">Using the Cloud Platform Prometheus, AlertManager and Grafana</a>
          </li>
          <li>
            <a href="/tasks.html#creating-your-own-custom-alerts">Creating your own custom alerts</a>
          </li>
          <li>
            <a href="/tasks.html#getting-application-metrics-into-prometheus">Getting Application Metrics into Prometheus</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#application-logging">Application Logging</a>
        <ul>
          <li>
            <a href="/tasks.html#application-log-collection-and-storage">Application Log Collection and Storage</a>
          </li>
          <li>
            <a href="/tasks.html#accessing-application-log-data">Accessing Application Log Data</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#migrating-from-live-0-to-live-1">Migrating from Live-0 to Live-1</a>
        <ul>
          <li>
            <a href="/tasks.html#migrating-from-live-0-to-live-1-overview">Overview</a>
          </li>
          <li>
            <a href="/tasks.html#accessing-the-live-1-cluster">Accessing the Live-1 cluster</a>
          </li>
          <li>
            <a href="/tasks.html#generating-a-new-environment">Generating a new environment</a>
          </li>
          <li>
            <a href="/tasks.html#generating-a-new-ecr-repository">Generating a new ECR repository</a>
          </li>
          <li>
            <a href="/tasks.html#changing-the-circleci-environment-variables">Changing the CircleCI environment variables</a>
          </li>
          <li>
            <a href="/tasks.html#deleting-your-live-0-deployment">Deleting your Live-0 deployment</a>
          </li>
          <li>
            <a href="/tasks.html#other-considerations">Other considerations</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/tasks.html#other-topics">Other Topics</a>
        <ul>
          <li>
            <a href="/tasks.html#git-crypt">Git-Crypt</a>
          </li>
          <li>
            <a href="/tasks.html#secrets-overview">Secrets overview</a>
          </li>
          <li>
            <a href="/tasks.html#migrating-an-rds-instance">Migrating an RDS instance</a>
          </li>
          <li>
            <a href="/tasks.html#kubectl-quick-reference">Kubectl quick reference</a>
          </li>
          <li>
            <a href="/tasks.html#other-topics-cloud-platform-support">Cloud Platform Support</a>
          </li>
          <li>
            <a href="/tasks.html#zero-downtime-deployments">Zero Downtime Deployments</a>
          </li>
          <li>
            <a href="/tasks.html#using-a-custom-domain">Using a custom domain</a>
          </li>
          <li>
            <a href="/tasks.html#ip-whitelisting">IP Whitelisting</a>
          </li>
          <li>
            <a href="/tasks.html#setup-postgres-container">Setup Postgres container</a>
          </li>
          <li>
            <a href="/tasks.html#applying-a-maintenance-page">Applying a Maintenance Page</a>
          </li>
          <li>
            <a href="/tasks.html#statefulsets-pods-with-persistent-volumes">StatefulSets (Pods with Persistent Volumes)</a>
          </li>
          <li>
            <a href="/tasks.html#how-to-decommission-unused-template-deploy-services">How to decommission unused template deploy services</a>
          </li>
          <li>
            <a href="/tasks.html#troubleshooting-guide">Troubleshooting guide</a>
          </li>
          <li>
            <a href="/tasks.html#ssl-connections-with-rds">SSL connections with RDS</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <a href="/reference.html#reference">Reference</a>
    <ul>
      <li>
        <a href="/reference.html#cloud-platform-operational-processes">Cloud Platform Operational Processes</a>
        <ul>
          <li>
          </li>
        </ul>
      </li>
      <li>
        <a href="/reference.html#cloud-platform-support">Cloud Platform Support</a>
        <ul>
          <li>
          </li>
        </ul>
      </li>
      <li>
        <a href="/reference.html#kubernetes-resources">Kubernetes resources</a>
        <ul>
          <li>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <a href="/getting-help.html#getting-help">Getting Help</a>
    <ul>
      <li>
        <a href="/getting-help.html#slack-channel">Slack Channel</a>
      </li>
      <li>
        <a href="/getting-help.html#raise-a-support-ticket">Raise a support ticket</a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
              <h1 id="reference">Reference</h1><p><h2 id="cloud-platform-operational-processes">Cloud Platform Operational Processes</h2><p>This is a record of the operational processes that we will use to support our users and to maintain the cloud platform.</p>
<h4 id="hours-of-support">Hours of support</h4><p>Our hours of providing support are 10am - 5pm. During this time we will work on support requests from teams and make sure someone is available to answer questions in Slack channel <a href="https://mojdt.slack.com/messages/C57UPMZLY/"><code>#ask-cloud-platform</code></a> and look at PR request notifications for the cloud-platform-environments repo on <a href="https://mojdt.slack.com/messages/CA5MDLM34/"><code>#cloud-platform-notify</code></a></p>
<p>Outside of these hours we will respond to <a href="#prioritising-incidents">high priority</a> incidents as per our <a href="#our-on-call-process">on call</a> process.</p>
<h4 id="working-hours">Working hours</h4><p>A member of the support team will be available online from 9am and until 6pm. This team member can be working remotely. We are doing this so that we cover incident response for the time when the person on call is coming into the office or going home at the end of the day.</p>
<p>This support team member should be ready to respond to any high priority incidents.</p>
<h4 id="the-support-team">The support team</h4><p>The key activities for the day are:</p>
<p><em>On starting the day (9AM)</em>
At least one engineer to:</p></p>

<ul>
<li>Check the <a href="https://mojdt.slack.com/messages/C8QR5FQRX/"><code>#low-priority-alarms</code></a> and <a href="https://mojdt.slack.com/messages/C8PF51AT0/"><code>#high-priority-alarms</code></a> slack channels for any issues to investigate</li>
<li>Check the board for any user requests that have been raised and not assigned</li>
<li>Get a handover from the on call engineer about any issues out of hours</li>
<li>Read through <a href="https://mojdt.slack.com/messages/C57UPMZLY/"><code>#ask-cloud-platform</code></a> slack channel</li>
</ul>

<p><em>During support hours (10AM - 5PM)</em>
At least one engineer to:</p>

<ul>
<li>Actively participate in <a href="https://mojdt.slack.com/messages/C57UPMZLY/"><code>#ask-cloud-platform</code></a> to field support requests, triage, prioritise and fix</li>
<li>Monitor <a href="https://mojdt.slack.com/messages/C8PF51AT0/"><code>#high-priority-alarms</code></a> and <a href="https://mojdt.slack.com/messages/C8QR5FQRX/"><code>#low-priority-alarms</code></a> for incidents, triage, prioritise and fix</li>
<li>Monitor <a href="https://mojdt.slack.com/messages/CA5MDLM34/"><code>#cloud-platform-notify</code></a> for cloud-platform-environments repo PR request notifications and cloud platform build notifications.</li>
<li>Monitor user support requests being added to the board and triage them for priority</li>
</ul>

<p>The whole support team to:</p>

<ul>
<li>Manage incident process for incidents in progress</li>
<li>Work on user requests for larger work</li>
<li>Work on support backlog stories</li>
</ul>

<p><em>Before ending the day (6PM)</em>
At least one engineer to:</p>

<ul>
<li>Handover information about any planned work or in progress high priority incidents to on call engineer</li>
</ul>

<h4 id="ask-cloud-platform-slack-channel"><code>#ask-cloud-platform</code> slack channel</h4><p>The <a href="https://mojdt.slack.com/messages/C57UPMZLY/"><code>#ask-cloud-platform</code></a> channel is our main entry point for support. We encourage people to ask questions and report problems in this channel and we&rsquo;ll do the best we can to help. We also welcome comments, opinions and any feedback regarding any of the services and the platform as a whole. This channel can also be used to communicate to other cloud platform users on topics you think that might be useful for other users.</p>
<p>One of the Cloud Platform Team will be available to answer questions throughout the hours of support (10AM - 5PM).</p>
<h4 id="what-we-communicate">What we communicate</h4><p>The main purpose of <a href="https://mojdt.slack.com/messages/C57UPMZLY/"><code>#ask-cloud-platform</code></a> is to discuss the problems that people are having and help them to solve them.</p>
<h4 id="user-support-tickets">User support tickets</h4><p>If someone is asking for help that will be quick to do (less than 15 mins) or is mainly advice then keep the interaction in channel and get it done.</p>
<p>If someone needs something that takes longer, is more challenging to complete or you find you&rsquo;ve spent longer than 15 mins on it, then continue to talk in the channel but also ask the person asking for help to raise a ticket using the GitHub issue <a href="https://github.com/ministryofjustice/cloud-platform/issues/new?template=cloud-platform-support-request.md&amp;labels=support%20team">link</a>.</p>
<p>The purpose of the ticket is to keep a record of the work we are doing and how it is progressing. It is <em>not</em> the primary communication channel with the person who raised the problem - this should remain slack where you can provide a richer and more human interaction, answering questions if necessary. The engineer working on the ticket should update the ticket for our record as work progresses.</p>
<p>In many cases it can be more helpful for the engineer on support to create the ticket rather than the person reporting the problem as you will be able to provide more relevant context.</p>
<p>Once they have created the ticket it will appear in the <code>Support New Issues</code> column of our <a href="https://app.zenhub.com/workspaces/cloud-platform-team-5ccb0b8a81f66118c983c189/board?repos=126507503,131595384,122635841,175829912">sprint board</a>. It can then be moved into the relevant columns as you work on it.</p>
<h4 id="cloud-platform-update-slack-channel"><code>#cloud-platform-update</code> slack channel</h4><p><a href="https://mojdt.slack.com/messages/CH6D099DF/"><code>#cloud-platform-update</code></a> has been created to make broadcast communications, examples include:</p>

<ul>
<li>when there is planned work on a service (e.g. we are completing maintenance on Postgres RDS instance in prod)</li>
<li>when there is an incident in progress (e.g there is a problem with Jenkins, no one can access it right now)</li>
</ul>
<p>In these situations:</p>

<ul>
<li>try not to use notifiers like <code>@here</code> and <code>@channel</code> unless absolutely necessary</li>
<li>perhaps use visual clues in your message to show it is an announcement</li>
<li>commit to a time when you will update on the situation and keep that commitment</li>
</ul>
<p>So for example:</p>

<blockquote>
<p><strong>ANNOUNCEMENT:</strong>
As agreed with the relevant teams, the cloud platform team will be upgrading Postgres from version 9.2 (out of support) to version 9.6 on CLA, Moving People Safely and Prison Visits Booking RDS instances today.</p>
<p>We will be doing this work between 10AM and 3PM, we will update at 1PM and 3PM to say how it is going.</p>
</blockquote>
<h4 id="our-incident-process">Our incident process</h4><p>An incident starts when a member of the support team says that it has. It is usually triggered by an alert that indicates a problem. The team member that calls it will send a message saying that there is an incident in progress to <a href="https://mojdt.slack.com/messages/C514ETYJX/"><code>#cloud-platform</code></a> and if user impacting, <a href="https://mojdt.slack.com/messages/C57UPMZLY/"><code>#ask-cloud-platform</code></a> and <a href="https://mojdt.slack.com/messages/CH6D099DF/"><code>#cloud-platform-update</code></a></p>

<ol>
<li><p>Support team chooses an incident lead. This person will be the main investigator of the incident. They start to work on the problem, calling on other team members (from the whole team) to help as required.</p></li>
<li><p>The rest of the support team communicates the incident out to those who are impacted, including giving updates at regular intervals. People to include:</p>

<ul>
<li>Users who are affected by the problem - via <a href="https://mojdt.slack.com/messages/C57UPMZLY/"><code>#ask-cloud-platform</code></a>, <a href="https://mojdt.slack.com/messages/CH6D099DF/"><code>#cloud-platform-update</code></a> and the affected team&rsquo;s own slack channels.</li>
<li>Team members for awareness or as they might be able to help - via <a href="https://mojdt.slack.com/messages/C514ETYJX/"><code>#cloud-platform</code></a> and the <code>@cloud-platform-team</code> group</li>
<li>People in the team who manage communication with senior leadership in MoJ - Steve, Karen, Tony.</li>
</ul></li>
<li><p>In a <em>high priority incident</em> (see below), the support team will gather every 1 hour to work out if additional people/skills are needed and update any external comms.</p></li>
<li><p>Once the incident is resolved, the support team will communicate that out and prepare for a postmortem.</p></li>
</ol>
<h4 id="prioritising-incidents">Prioritising incidents</h4><p>An incident is a system failure or degradation that has an impact on users of the cloud platform.</p>
<p>The size of that impact determines the priority of the incident. At the moment, we find it useful to categories incidents as high priority - we will begin work on any incident as soon as a member of the support team is available but high priority incidents require greater focus and communication.</p>
<h4 id="high-priority">High priority</h4>

<ul>
<li>Service outages of user facing services</li>
<li>Slowdown or degradation of service on a user facing service</li>
<li>Failure of a system that stops one or more teams from working</li>
<li>Failure of a system that creates a major vulnerability in the cloud platform</li>
</ul>
<p><h4 id="postmortems">Postmortems</h4><p>In the cloud platform team we follow the practice of better understanding system failures through <a href="https://codeascraft.com/2012/05/22/blameless-postmortems/">blameless postmortems</a>.</p>
<p>The point of a postmortem is to understand the various factors that led up to a system failure and to try to identify things that can be improved to try to stop a similar event occurring in future.</p>
<p>Our approach to postmortems is to:</p></p>

<ul>
<li>For high priority incidents to hold a group session as soon as possible after the incident is closed</li>
<li>Develop a timeline of the activities that led to the incident and its resolution</li>
<li>Walkthrough that timeline and use it to identify opportunities for improvements</li>
<li>Emerge with a prioritised list of improvements to be made, with owners</li>
<li>Write up and publish the postmortem, giving a record of the timeline and any actions that have been agreed</li>
</ul>

<p>We currently publish our postmortem reports on <a href="https://moj-digital-tools.pagerduty.com/postmortems/">pagerduty</a>. We have agreement to make these public and are in the process of working out how to do that.</p>
<p><h4 id="our-on-call-process">Our on call process</h4><p>Team members who are on call manage an on call rota in pagerduty. The on call rota consists of a primary engineer and a secondary engineer.</p>
<p>Team members that are new to the rota should ensure that they have a secondary who has enough knowledge and experience of the process to support them.</p>
<p>The hours of on call are 7AM–10AM and 5PM–10PM weekdays, 7AM-10PM weekends and bank holidays. 9AM - 10AM and 5PM - 6PM are additionally covered by a team member from support who is online during those periods.</p>
<p>On call team members will respond to high priority incidents out of hours and will work on those incidents for up to 1 hour. If the engineer is not able to resolve the issue within that timeframe they will:</p></p>

<ul>
<li>put the service into maintenance mode</li>
<li>inform the affected team</li>
<li>put together a plan to resolve the issue in hours</li>
</ul>
<p><h4 id="our-documentation">Our documentation</h4><p>All Cloud Platform documentation is openly available in Git repos stored on Github. The starting point for this documentation is the <a href="https://github.com/ministryofjustice/cloud-platform">Cloud Platform repo</a>.</p>
<p>For using Cloud Platform we have created the <a href="https://user-guide.cloud-platform.service.justice.gov.uk">Cloud Platform User Guide</a>. This guide is the &ldquo;front door&rdquo; to the Cloud Platform and contains concepts, tasks, walkthroughs and other reference to help teams use the Cloud Platform.</p>
<p>For our legacy systems based around the Template Deploy tooling, our documentation lives in <a href="https://dsdmoj.atlassian.net/wiki/spaces/PLAT/overview">Confluence</a>. This documentation includes architecture, runbooks and common issues.</p></p>
<p><h2 id="cloud-platform-support">Cloud Platform Support</h2><h4 id="background">Background</h4><p>The Cloud Platform Team has built a new platform to replace Template Deploy. We are employing modern tools and techniques to enable teams to develop and support their modern cloud native software and infrastructure.</p>
<p>This also provides us with an opportunity to enable teams, through self-service, to develop and support products the way they want to, without having to rely on the Cloud Platform Team for assistance.</p>
<p>This new flexibility changes the way in which the Cloud Platform team provides support to our users.</p>
<h4 id="cloud-platform-team-support-processes">Cloud Platform Team Support Processes</h4><p>The Cloud Platform <a href="#operational-processes.md">Operational Processes</a> details how we will offer support to our users for the new platform.</p>
<p>This includes support hours, out-of-hours support, operational communication with users, incident management, and how we measure performance.</p>
<h4 id="what-does-cloud-platform-team-support">What does Cloud Platform Team support</h4><p>Below is a diagram of the Cloud Platform.</p>
<p><a href="../images/cloud-platform-diagram.png" target="_blank" rel="noopener noreferrer"><img src="/images/cloud-platform-diagram.png" alt="Cloud Platform Diagram" /></a></p>
<p>The Cloud Platform Team supports everything outside of a user’s namespace. Namespaces are shaded blue in the picture above.</p>
<p>Support includes:</p></p>

<ul>
<li>responding to failures of the underlying platform e.g. the cluster</li>
<li>responding to failure of the management layer of the platform</li>
<li>responding to failure of reusable components created by the Cloud Platform team and provided to users </li>
<li>responding to failures of the Kubernetes API </li>
<li>security of the platform<br></li>
</ul>
<p><h4 id="what-the-cloud-platform-team-doesn-t-support">What the Cloud Platform Team doesn’t support</h4><p>The Cloud Platform Team doesn’t provide:</p></p>

<ul>
<li>any application related support, including responding to application-specific alerts or failures</li>
<li>any support for infrastructure and other tools deployed within a users namespace</li>
<li>security of the application</li>
<li>ongoing maintenance of the application, including patching, updating dependencies, and ensuring it remains deployable</li>
<li>user support for users of the application</li>
</ul>
<p><h4 id="what-this-means-for-cloud-platform-users">What this means for Cloud Platform users</h4><p>It means teams using the platform will be responsible for supporting the infrastructure they build, and the applications running on it.</p>
<p>We expect teams or service areas using the platform to ensure they can, for the life of the service:</p></p>

<ul>
<li>monitor and manage the health of their applications and service-specific infrastructure (setting up and responding to monitoring, logging, and alerts, as appropriate)</li>
<li>keep their applications and service-specific infrastructure appropriately patched, up-to-date, and secure</li>
<li>ensure their applications remain deployable end-to-end from source code</li>
<li>regularly assess whether the service is still meeting user needs, and make appropriate efforts to improve, replace, or end-of-life the service if not</li>
</ul>

<p>The Cloud Platform Team will be responsible for support of the underlying platform and “building blocks” that we make available to users.</p>

<p>The new Cloud Platform introduces modern technology that users may not already be familiar with. The Cloud Platform User Guide is intended to help users understand some of the basic concepts of working with Kubernetes, as well as providing links to useful training and reference materials. In addition, the Cloud Platform Team will be very happy to assist with any queries you might have at #cloud-platform-users slack channel.</p>

<p>You can also speak to your line manager or Head of Profession should you have any further training needs.</p>
<p><h4 id="how-does-this-impact-products-still-using-template-deploy">How does this impact products still using Template Deploy?</h4><p>The Cloud Platform Team have been reaching out to teams since October 2018 to help plan migration away from Template Deploy.</p>
<p>In the interim, support for products using Template Deploy remains unchanged. Support will continue to be offered to these services under the existing Incident Response and Tuning (IRAT) process.</p>
<p>To raise Template Deploy related support requests you should create a <a href="http://goo.gl/msfGiS">Github Issue</a> with details of the problem.</p>
<p>As Template Deploy is being phased out, the Cloud Platform Team will not develop this product further and will aim instead to only fix incidents as they arise.</p>
<h4 id="where-to-find-help">Where to find help</h4><p>If you have any questions or require help from the Cloud Platform Team in relation to the new Cloud Platform contact us at the <code>#ask-cloud-platform</code> slack channel.</p></p>
<p><h2 id="kubernetes-resources">Kubernetes resources</h2><p>Here are some links to Kubernetes resources:</p></p>

<ul>
<li><a href="https://kubernetes.io">Official Website</a></li>
<li><a href="https://kubernetes.io/docs/concepts">Offical Docs</a></li>
<li><a href="https://docs.docker.com/docker-for-mac/kubernetes">Running k8s locally using Docker</a></li>
<li><a href="https://docs.docker.com/docker-for-mac/kubernetes">Running k8s locally using Minikube</a></li>
</ul>
<p><h4 id="command-line-kubernetes-interaction">Command Line Kubernetes Interaction</h4><p>Kubernetes has it&rsquo;s own official CLI tool for interacting with a Cluster called <code>kubectl</code>. It is certainly worth learning the basics of <code>kubectl</code>, As the vast majority of time interacting with Kubernetes will be through this tool.</p>
<p>We have our own page on <a href="/tasks.html#kubectl-quick-reference">Kubectl Basics</a>.</p></p>


            
          </main>

            <ul class="contribution-banner">
              <li><a href="https://github.com/ministryofjustice/cloud-platform-user-guide/blob/master/source/reference.html.md.erb">View source</a></li>
              <li><a href="https://github.com/ministryofjustice/cloud-platform-user-guide/issues/new?labels=bug&amp;title=Re:%20'Reference'&amp;body=Problem%20with%20'Reference'%20(https://user-guide.cloud-platform.service.justice.gov.uk/reference.html)">Report problem</a></li>
              <li><a href="https://github.com/ministryofjustice/cloud-platform-user-guide">GitHub Repo</a></li>
            </ul>

          <footer class="footer">
  <div class="footer__licence">
    <a class="footer__licence-logo" href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license">Open Government Licence</a>
    <p class="footer__licence-description">All content is available under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license">Open Government Licence v3.0</a>, except where otherwise stated</p>
  </div>

  <div class="footer__copyright">
    <a class="footer__copyright-logo" href="http://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/copyright-and-re-use/crown-copyright/">© Crown copyright</a>
  </div>
</footer>

        </div>
      </div>
    </div>

    
  </body>
</html>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138188246-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-138188246-1');
</script>

<script>
  // Add the current window.location to the body of the
  // feedback email message.
  function sendFeedback(mailto, event) {
    event.preventDefault();

    var body = "Feedback/Problem on page: " + window.location + "\n";
    var href = mailto + '&body=' + encodeURIComponent(body);

    window.location = href;
  }

  $(document).ready(function() {
    var feedbackLink = $('a[href^="mailto:"]:contains("Feedback")')[0];
    var mailto = feedbackLink.href;
    $(feedbackLink).on('click', function(event) { sendFeedback(mailto, event); });
  });
</script>
